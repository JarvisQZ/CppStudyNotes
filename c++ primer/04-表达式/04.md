[toc]

# 第4章 表达式

## 4.1 基础

## 4.1.1 基本概念
作用于一个对象的叫一元运算符
作用于两个对象的叫二元运算符

一般的二元运算符都要求两个运算对象的类型相同或者可以转换为同一种类型

`左值和右值`
- C++表达式 要么是左值，要么是右值
- 左值和右值不已位置来区分
- 右值：当一个对象被用作右值时，用的是对象的值（内容）
- 左值：当一个对象被用作左值时，用的是对象的身份（在内存中的位置）
- 需要右值的地方可以用左值来代替，但是右值不能代替左值
  
### 4.1.2 优先级与结合律
数学

### 4.1.3 求值顺序

## 4.2 算数运算符
加减乘除

## 4.3 逻辑和关系运算符
- 逻辑运算符：！、&&、||。逻辑运算符的作用对象必须是能转换成布尔值的类型
- 关系运算符：<, <=, >, >=, !=, == ：大于小于的优先级高于等于和不等于

运算结果都是布尔值

## 4.4 赋值运算符
复制运算符的左侧运算对象必须是一个可修改的左值

C++ 11 允许使用花括号括起来的初始值列表作为右侧运算对象。初始化列表可以为空，此时将进行值初始化。

赋值运算符满足右结合律。

## 4.5 递增和递减运算符
++ --
分为两种版本：前置版本和后置版本。
- 前置版本：首先将运算对象加 1，然后将改变后的对象作为求值结果。
- 后置版本：也是将运算对象加 1，但是求值结果是运算对象改变之前那个值的副本。

如无必要，不要使用后置版本
- 前置版本直接返回改变了的运算对象，后置版本需要将原始值保存下来以便于返回，是一种浪费。
- 后置版本对于整数和指针来说影响不大，对于迭代器而言消耗巨大。

## 4.6 成员访问运算符
点运算符和箭头运算符都可以用来访问成员。
ptr->mem 等价于 (*ptr).mem

## 4.7 条件运算符
cond ? expr1 : expr2
可以使用嵌套条件运算符

条件运算符优先级非常低，通常都要加括号

## 4.8 位运算符

## 4.9 sizeof运算符
sizeof 是一个运算符。
sizeof 返回一条表达式或一个类型名字所占的字节数，值为 size_t 类型。

## 4.10 逗号运算符
在 for 循环中可以用逗号分隔两个不同的条件

## 4.11 类型转换

## 4.12 运算符优先级表

```c++
:: //作用域
. 和 -> //成员访问。注意它非常高，比括号还高。
[] 和 ()
++、-- //注意递增递减运算符的优先级非常高，括号之下最高的。

, //逗号是最低的
```